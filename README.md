## üß∞ –£—Ä–æ–≤–µ–Ω—å 6: –ü—Ä–∞–∫—Ç–∏–∫–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ

**–§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç: ¬´–í–µ–±-–º–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á¬ª**

–†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ (todo list) —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (—Ñ–æ—Ä–º–∞)
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –∑–∞–¥–∞—á
- –û—Ç–º–µ—Ç–∫–∞ –∑–∞–¥–∞—á–∏ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π
- –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
1.  **–°—É—â–Ω–æ—Å—Ç—å:** `Task` (id, description, isDone, createdAt)
2.  **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `TaskRepositoryInterface` (save, find, findAll, delete)
3.  **–°–µ—Ä–≤–∏—Å:** `TaskService` (–º–µ—Ç–æ–¥—ã addTask, markAsDone, etc.)
4.  **DTO:** `AddTaskRequest` (–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç `$_POST`)
5.  **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:** –§–∞–π–ª `index.php` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ –≤—ã–±–æ—Ä:**
- `ArrayTaskRepository` (—Ö—Ä–∞–Ω–∏—Ç –≤ –ø–∞–º—è—Ç–∏)
- `FileTaskRepository` (—Ö—Ä–∞–Ω–∏—Ç –≤ JSON/—Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ)
- `SqliteTaskRepository` (—á–µ—Ä–µ–∑ PDO)

---

## üß™ –£—Ä–æ–≤–µ–Ω—å 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π!)

**–¶–µ–ª—å:** –ù–∞–ø–∏—Å–∞—Ç—å Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

### –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
1.  **–°–µ—Ä–≤–∏—Å—ã:** `UserService`, `TaskService` (—Å –º–æ–∫–∞–º–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤)
2.  **DTO:** `CreateUserRequest`, `AddTaskRequest` (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
3.  **–°—É—â–Ω–æ—Å—Ç–∏:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–æ–≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

üé≠ Mock (–ú–æ–∫) = –ö–æ–Ω—Ç—Ä–æ–ª—ë—Ä-–Ω–∞–¥–∑–∏—Ä–∞—Ç–µ–ª—å
–ó–∞–¥–∞—á–∞: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –í–ó–ê–ò–ú–û–î–ï–ô–°–¢–í–ò–ï

"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–≤–∞—Ä –í–ó–Ø–õ –Ω–æ–∂"

"–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫—É—Ä—å–µ—Ä –ü–û–ó–í–û–ù–ò–õ –∫–ª–∏–µ–Ω—Ç—É"

php
// Mock —Å–ª–µ–¥–∏—Ç: "–ë—ã–ª –ª–∏ –≤—ã–∑–≤–∞–Ω –º–µ—Ç–æ–¥ save?"
$mock->expects($this->once())->method('save');
üì¶ Stub (–°—Ç–∞–±) = –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Å—Ç–∞–≤—â–∏–∫
–ó–∞–¥–∞—á–∞: –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –í–û–ó–í–†–ê–©–ê–ï–ú–´–ï –î–ê–ù–ù–´–ï

"–í—Å–µ–≥–¥–∞ –¥–∞–≤–∞—Ç—å –∫—É—Ä–∏–Ω–æ–µ –º—è—Å–æ"

"–í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç–∞—Ç—É—Å 'new'"

php
// Stub –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
$stub->method('find')->willReturn($fakeTask);
üéØ –ö–ª—é—á–µ–≤–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ:
Mock –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ü–û–í–ï–î–ï–ù–ò–ï:
"–ú–µ—Ç–æ–¥ save() –±—ã–ª –≤—ã–∑–≤–∞–Ω 1 —Ä–∞–∑ —Å —Ç–∞–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏"

Stub –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –î–ê–ù–ù–´–ï:
"–ü—Ä–∏ –≤—ã–∑–æ–≤–µ find() –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç"

üí° –ö–æ–≥–¥–∞ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
–ò—Å–ø–æ–ª—å–∑—É–π Mock –∫–æ–≥–¥–∞:
–¢–µ—Å—Ç–∏—Ä—É–µ—à—å, —á—Ç–æ –º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–ü—Ä–æ–≤–µ—Ä—è–µ—à—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏

–ò—Å–ø–æ–ª—å–∑—É–π Stub –∫–æ–≥–¥–∞:
–ù—É–∂–Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –∫–æ–¥

–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

üöÄ –ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:
Mock = "–ü—Ä–∏—Ç–≤–æ—Ä–∏—Å—å –∏ –°–õ–ï–î–ò"
Stub = "–ü—Ä–∏—Ç–≤–æ—Ä–∏—Å—å –∏ –û–¢–î–ê–ô"

–í 90% —Å–ª—É—á–∞–µ–≤ –≤ PHPUnit —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Mock, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –∫–∞–∫ Stub üòä